* add tests
* fix errors
* refactor
* add e2e tests